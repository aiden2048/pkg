package fmts

import (
	"testing"
	"unicode/utf8"
)

func TestSliceLongStr(t *testing.T) {
	str := `[2023-12-21 19:48:48.405]|[httpProxyApi/httpProxy_api.go:93][ERROR][Trace:7523264605342:NA.EnterGame:conn.1001:LaunchGame:extGame.1][102:13026407][provider.8001]| -- httpProxyApi-> xclient.Call  -- [{"Key":"httpproxy-741c676b569276a7.elb.ap-east-1.amazonaws.com:20000","Value":""}] -- err -- context deadline exceeded -- req -- {"method":"POST","url":"https://api.pg-bo.net/external-game-launcher/api/v1/GetLaunchURLHTML?trace_id=9c2d34f3-eb3d-4545-b2f8-dfdbba1994cd","sproxy":"","header":{"Content-Type":"application/x-www-form-urlencoded"},"body":"Y2xpZW50X2lwPTE3NS4xNzYuNjkuMTk1JmV4dHJhX2FyZ3M9YnR0JTNEMSUyNmwlM0RlbiUyNm9wcyUzREFBSjJQVEVSTUxSR0FDJm9wZXJhdG9yX3Rva2VuPUM0MDUyNzcxLTRBNjktQjk3RC0zNTIwLUJBMkJCODU5NDhBNCZwYXRoPSUyRjEzMCUyRmluZGV4Lmh0bWwmdXJsX3R5cGU9Z2FtZS1lbnRyeQ==","timeout":10,"http_type":1,"user_name":"","password":"","skip_verify":false}------request msg------{"Sess":{"Uid":13026407,"AppID":102,"os":1,"PlatID":2001,"SvrFE":"extGame","SvrID":1,"addr":"175.176.69.195","LoginInfo":{"PackNo":20000,"utype":2,"os":1,"expire":1703783354,"LoginAddr":"175.176.69.195","RemoteAddr":"175.176.69.195","Mac":"a255a762-31d7-4a97-8c02-745378eb38ba","src":"http","is_free":false,"real_uid":0,"sign":413663},"Time":1703159318,"rpc_type":"","trace":{"Uid":13026407,"AppID":102,"trace_id":"7523264605342:NA.EnterGame:conn.1001:LaunchGame:extGame.1"}},"encrypt":false,"Body":{"_func":"LaunchGame","_check":"2023-12-21 19:48:38","_param":{"appCode":"AAJ2P","packNo":20000,"genNo":2,"nick":"1*****07","ip":"175.176.69.195","osType":4,"lang":1,"demo":0,"isTestUser":false,"game":"{\"_id\":\"64cb966b9a17d67f2fe85743\",\"app_id\":102,\"game_id\":100402092,\"game_class\":2,\"game_schemas\":[3,4,13],\"tag\":0,\"game_name\":\"Lucky Piggy\",\"mult_game_name\":{},\"status\":1,\"is_lobby\":0,\"sort_index\":0,\"maker_id\":20004,\"account_id\":320,\"test_account_id\":392,\"test_ext_game_id\":\"130\",\"agent_id\":100008,\"rtp\":967900,\"max_lose\":200000000,\"demo\":0,\"direction\":0,\"jump\":0,\"ext_game_id\":\"130\",\"reserved1\":\"\",\"reserved2\":\"\",\"suspended\":0,\"code_mode\":1,\"code_rate\":0,\"flow_mode\":1,\"flow_rate\":0,\"experience_point\":0,\"use_point2\":1,\"created_at\":\"2023-08-03T11:58:35.707Z\",\"updated_at\":\"2023-12-15T17:08:31.33Z\"}","account":"{\"_id\":\"6571b74ffaa128bdb56378ee\",\"acc_id\":320,\"name\":\"PG Soft_PH_P\",\"status\":1,\"is_test\":0,\"tag\":\"\",\"desc\":\"\",\"country\":\"PH\",\"language\":\"\",\"currency\":\"PHP\",\"default_game_id\":100400000,\"default_ext_gid\":\"100499999\",\"route_id\":3,\"agent_id\":100008,\"fee_rate\":0,\"time_zone\":1,\"account\":\"C4052771-4A69-B97D-3520-BA2BB85948A4\",\"token\":\"C515E31379757377CDBCACA43AD93CCA\",\"secret\":\"F506948FDA84CBDE85A73D4EEF2ADD27\",\"is_local\":1,\"mix_suffix\":\"\",\"url\":\"https://m.pgr-nmga.com\",\"url2\":\"https://api.pg-bo.net\",\"url3\":\"\",\"config\":\"\",\"created_at\":\"2023-12-07T12:15:11.297Z\",\"updated_at\":\"2023-12-20T13:31:54.068Z\"}","ext":{},"homeUrl":"https://www.aajili.com/res/gameclose.html","cashier":"https://www.aajili.com/res/gameclose.html?pop=deposit","responsibleGaming":"https://www.aajili.com/res/gameclose.html","timeout":10}},"Conn":null}--------------------end`
	t.Log(utf8.RuneCountInString(str))
	t.Log(string([]rune(str)[:1500]) + "...")
}
